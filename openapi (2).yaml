openapi: 3.0.3
info:
  title: Product IT Assessment
  description: API documentation for the Survey Application, including User, Question, and Assessment services.
  version: 1.0.0

servers:
  - url: http://localhost:8080
    description: Local server
tags:
  - name: UserService
    externalDocs:
      description: Find out more
      url: http://swagger.io
  
  - name: QuestionService
    externalDocs:
      description: Find out more
      url: http://swagger.io
      
  - name: AssessmentService
    externalDocs:
      description: Find out more
      url: http://swagger.io
  - name: DashboardService
    externalDocs:
      description: Find out more
      url: http://swagger.io

paths:
  /users/adduser:
    post:
      tags:
        - UserService
      summary: Create a new user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                uid:
                  type: string
                  example: user1
                uname:
                  type: string
                  example: JohnDoe
                password:
                  type: string
                  example: hashedpassword
      responses:
        '200':
          description: User created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: success
                  uid:
                    type: string
                    example: user1
                    


  /users/getallusers:
    get:
      tags:
        - UserService
      summary: Retrieve user details
      responses:
        '200':
          description: User details retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  uid:
                    type: string
                    example: user1
                  uname:
                    type: string
                    example: JohnDoe
                  password:
                    type: string
                    example: hashedpassword

  /users/deleteuser/{uid}:
    delete:
      tags:
        - UserService
      summary: Delete a user
      parameters:
        - name: uid
          in: path
          required: true
          schema:
            type: string
            
      responses:
        '200':
          description: User deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: success
                  uid:
                    type: string
                    example: user1

  /questions/deletebyqid/{setname}/{qid}:
    delete:
      tags:
        - QuestionService
      summary: Delete a question based on qid
      parameters:
        - name: setname
          in: path
          required: true
          schema:
            type: string
        - name: qid
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Question deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: success
                  setname:
                    type: string
                    example: ExampleSet
                  qid:
                    type: string
                    example: q1
  /questions/updatebyqid/{setname}/{qid}:
    put:
      tags:
        - QuestionService
      summary: Update a question based on qid
      parameters:
        - name: setname
          in: path
          required: true
          schema:
            type: string
        - name: qid
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                domain:
                  type: string
                  example: domain1
                qdetails:
                  type: string
                  example: What is your full name?
                answers:
                  type: array
                  items:
                    type: object
                    properties:
                      id:
                        type: string
                        example: answer1_id
                      answer:
                        type: string
                        example: answer1
                      suggestions:
                        type: array
                        items:
                          type: object
                          properties:
                            suggestion_id:
                              type: string
                              example: suggestion1_id
                            suggestion_text:
                              type: string
                              example: suggestion1
                uname:
                  type: string
                  example: JohnDoe
                modified_at:
                  type: string
                  format: date-time
                  example: "2024-08-01T12:00:00Z"
      responses:
        '200':
          description: Question updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: success
                  setname:
                    type: string
                    example: ExampleSet
                  qid:
                    type: string
                    example: q1
                  updatedQuestion:
                    type: object
                    properties:
                      domain:
                        type: string
                        example: domain1
                      qdetails:
                        type: string
                        example: What is your full name?
                      answers:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: string
                              example: answer1_id
                            answer:
                              type: string
                              example: answer1
                            suggestions:
                              type: array
                              items:
                                type: object
                                properties:
                                  suggestion_id:
                                    type: string
                                    example: suggestion1_id
                                  suggestion_text:
                                    type: string
                                    example: suggestion1
                      uname:
                        type: string
                        example: JohnDoe
                      created_at:
                        type: string
                        format: date-time
                        example: "2024-08-01T12:00:00Z"
                      modified_at:
                        type: string
                        format: date-time
                        example: "2024-08-01T12:00:00Z"

  /questions/{setname}/{qid}/answers/{answerId}:
    delete:
      tags:
        - QuestionService
      summary: Delete an answer based on its id
      parameters:
        - name: setname
          in: path
          required: true
          schema:
            type: string
        - name: qid
          in: path
          required: true
          schema:
            type: string
        - name: answerId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Answer deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: success
                  setname:
                    type: string
                    example: ExampleSet
                  qid:
                    type: string
                    example: q1
                  answerId:
                    type: string
                    example: answer1_id

  /questions/addquestions/{setname}:
    post:
      tags:
        - QuestionService
      summary: Post a set of questions
      parameters:
        - name: setname
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                questions:
                  type: array
                  items:
                    type: object
                    properties:
                      qid:
                        type: string
                        example: q1
                      uname:
                        type: string
                        example: JohnDoe
                        
                      qdetails:
                        type: string
                        example: What is your name?
                      answers:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: string
                              example: answer1_id
                            answer:
                              type: string
                              example: answer1
                            suggestions:
                              type: string
                              example: suggestion1
                      
                      created_at:
                        type: string
                        format: date-time
                        example: "2024-08-01T12:00:00Z"
                      modified_at:
                        type: string
                        format: date-time
                        example: "2024-08-01T12:00:00Z"
      responses:
        '200':
          description: Questions posted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: success
                  setname:
                    type: string
                    example: ExampleSet
                    
  /questions/getexistingquestions/{setname}:
    get:
      tags:
        - QuestionService
      summary: Retrieve questions for a setname
      parameters:
        - name: setname
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Questions retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  setname:
                    type: string
                    example: ExampleSet
                  questions:
                    type: array
                    items:
                      type: object
                      properties:
                        qid:
                          type: string
                          example: q1
                        uname:
                          type: string
                          example: JohnDoe
                        domain:
                          type: string
                          example: domain1
                        qdetails:
                          type: string
                          example: What is your name?
                        answers:
                          type: array
                          items:
                            type: object
                            properties:
                              id:
                                type: string
                                example: answer1_id
                              answer:
                                type: string
                                example: answer1
                              suggestions:
                                type: array
                                items:
                                  type: object
                                  properties:
                                    suggestion_id:
                                      type: string
                                      example: suggestion1_id
                                    suggestion_text:
                                      type: string
                                      example: suggestion1
                      
                        created_at:
                          type: string
                          format: date-time
                          example: "2024-08-01T12:00:00Z"
                        modified_at:
                          type: string
                          format: date-time
                          example: "2024-08-01T12:00:00Z"
                  
                          
  
  /questions/addquestions/{targetsetname}/addquestionsfromexisting/{sourcesetname}:
    post:
      tags:
        - QuestionService
      summary: Add questions from an existing set to a new target set
      parameters:
        - name: targetsetname
          in: path
          required: true
          schema:
            type: string
            example: NewSet
        - name: sourcesetname
          in: path
          required: true
          schema:
            type: string
            example: OldSet
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                questions:
                  type: array
                  items:
                    type: object
                    properties:
                      qid:
                        type: string
                        example: q1
                      uname:
                        type: string
                        example: JohnDoe
                      qdetails:
                        type: string
                        example: What is your name?
                      answers:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: string
                              example: answer1_id
                            answer:
                              type: string
                              example: answer1
                            suggestions:
                              type: string
                              example: suggestion1
                      created_at:
                        type: string
                        format: date-time
                        example: "2024-08-01T12:00:00Z"
                      modified_at:
                        type: string
                        format: date-time
                        example: "2024-08-01T12:00:00Z"
      responses:
        '200':
          description: Questions successfully copied to the target set
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: success
                  targetsetname:
                    type: string
                    example: NewSet
                  sourceSetname:
                    type: string
                    example: OldSet
                  copiedQuestions:
                    type: array
                    items:
                      type: object
                      properties:
                        qid:
                          type: string
                          example: q1
                        uname:
                          type: string
                          example: JohnDoe
                        qdetails:
                          type: string
                          example: What is your name?
                        answers:
                          type: array
                          items:
                            type: object
                            properties:
                              id:
                                type: string
                                example: answer1_id
                              answer:
                                type: string
                                example: answer1
                              suggestions:
                                type: array
                                items:
                                  type: object
                                  properties:
                                    suggestion_id:
                                      type: string
                                      example: suggestion1_id
                                    suggestion_text:
                                      type: string
                                      example: suggestion1
                        created_at:
                          type: string
                          format: date-time
                          example: "2024-08-01T12:00:00Z"
                        modified_at:
                          type: string
                          format: date-time
                          example: "2024-08-01T12:00:00Z"
        '404':
          description: Source set not found or target set not found
        '400':
          description: Bad request, e.g., invalid parameters or data

                    
                    
  /assessments/getallassessments:
    get:
      tags:
        - AssessmentService
      summary: Get all assessments
     
      responses:
        '200':
          description: Assessments retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  aid:
                    type: string
                    example: assessment1
                  setname:
                    type: string
                    example: ExampleSet
                  uname:
                    type: string
                    example: JohnDoe
                  domain:
                    type: string
                    example: domain1
                  status:
                    type: string
                    example: active
                  cname:
                    type: string
                    example: CompanyA
                  questions:
                    type: array
                    items:
                      type: object
                      properties:
                        qid:
                          type: string
                          example: q1
                        domain:
                          type: string
                          example: domain1
                        qdetails:
                          type: string
                          example: What is your name?
                        answers:
                          type: array
                          items:
                            type: object
                            properties:
                              id:
                                type: string
                                example: answer1_id
                              answer:
                                type: string
                                example: answer1
                              suggestions:
                                type: array
                                items:
                                  type: object
                                  properties:
                                    suggestion_id:
                                      type: string
                                      example: suggestion1_id
                                    suggestion_text:
                                      type: string
                                      example: suggestion1
                        uname:
                          type: string
                          example: JohnDoe
                        created_at:
                          type: string
                          format: date-time
                          example: "2024-08-01T12:00:00Z"
                        modified_at:
                          type: string
                          format: date-time
                          example: "2024-08-01T12:00:00Z"
                  postedBy:
                    type: object
                    properties:
                      uid:
                        type: string
                        example: user1
                      uname:
                        type: string
                        example: JohnDoe
                      password:
                        type: string
                        example: hashedpassword
                        
  /dashboard/adddetails:
    post:
      tags:
        - DashboardService
      summary: Add details to the dashboard
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                cname:
                  type: string
                  example: ExampleCompany
                cemail:
                  type: string
                  example: contact@example.com
                domain:
                  type: string
                  example: exampleDomain
                setname:
                  type: string
                  example: ExampleSet
                uname:
                  type: string
                  example: John Doe
                status:
                  type: string
                  example: active
              required:
                - cname
                - cemail
                - domain
                - setname
                - uname
                - status
      responses:
        '201':
          description: Details added successfully
        '400':
          description: Bad request, invalid input
        '404':
          description: Not found, endpoint or resource not available
        '500':
          description: Internal server error

  /dashboard/getdetails:
    get:
      tags:
        - DashboardService
      summary: Retrieve all details from the dashboard
      responses:
        '200':
          description: Details retrieved successfully
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    slno:
                      type: integer
                      example: 1
                    cname:
                      type: string
                      example: ExampleCompany
                    cemail:
                      type: string
                      example: contact@example.com
                    domain:
                      type: string
                      example: exampleDomain
                    setname:
                      type: string
                      example: ExampleSet
                    uname:
                      type: string
                      example: John Doe
                    status:
                      type: string
                      example: active


